<!-- Create Task Button -->
<button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#createTaskModal">
    Create Task
</button>

<!-- Create Task Modal -->
<div class="modal fade" id="createTaskModal" tabindex="-1" aria-labelledby="createTaskModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <form method="POST" action="{% url 'task:create_task' %}">
                {% csrf_token %}
                <div class="modal-header">
                    <h5 class="modal-title" id="createTaskModalLabel">Create Task</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <!-- Task Title -->
                    <div class="mb-3 row">
                        <div class="col-12 col-md-6">
                            <label for="title" class="form-label">Task Title</label>
                            <input type="text" class="form-control" id="title" name="content" placeholder="Task Title" required>
                        </div>
                        <!-- Environment Selection -->
                        <div class="col-12 col-md-6">
                            <label for="environment_id" class="form-label">Environment</label>
                            <select class="form-select" id="environment_id" name="environment_id" required>
                                <option value="">Select an environment</option>
                                {% for environment in environments %}
                                    <option value="{{ environment.id }}">{{ environment.label }}</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>
                    <!-- Task State -->
                    <div class="mb-3 row">
                        <div class="col-12 col-md-6">
                            <label for="state" class="form-label">Task State</label>
                            <select class="form-select" id="state" name="status" required>
                                <option value="PENDING">Pending</option>
                                <option value="IN_PROGRESS">In Progress</option>
                                <option value="COMPLETED">Completed</option>
                            </select>
                        </div>
                        <!-- Task Priority -->
                        <div class="col-12 col-md-6">
                            <label for="priority" class="form-label">Task Priority</label>
                            <select class="form-select" id="priority" name="priority" required>
                                <option value="LOW">Low</option>
                                <option value="MEDIUM">Medium</option>
                                <option value="HIGH">High</option>
                            </select>
                        </div>
                    </div>

                    <!-- Assign To -->
                    <div class="mb-3 row">
                        <div class="col-12 col-md-6">
                            <label for="assigned_to" class="form-label">Assign to</label>
                            <select class="form-select" id="assigned_to" name="assigned_to" required>
                                {% for user in users %}
                                    <option value="{{ user.id }}">{{ user.username }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <!-- Task Deadline -->
                        <div class="col-12 col-md-6">
                            <label for="deadline" class="form-label">Task Deadline</label>
                            <input type="date" class="form-control" id="deadline" name="deadline" required>
                        </div>
                    </div>

                    <!-- Task Start Date -->
                    <div class="mb-3 row">
                        <div class="col-12 col-md-6">
                            <label for="start_date" class="form-label">Task Start Date</label>
                            <input type="date" class="form-control" id="start_date" name="start_date" required>
                        </div>
                    </div>

                    <!-- Task Description -->
                    <div class="mb-3">
                        <label for="content" class="form-label">Task Content</label>
                        <textarea class="form-control" id="content" name="content" rows="3" placeholder="Task Content" required></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">Create</button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Include Bootstrap CSS and JS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<!-- Custom Styling for the Modal -->
<style>
    .modal-content {
        background-color: #f9f9f9;
        border-radius: 10px;
        padding: 20px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }
    .modal-header {
        border-bottom: 1px solid #e0e0e0;
    }
    .modal-footer {
        border-top: 1px solid #e0e0e0;
    }
    .form-label {
        font-weight: bold;
    }
    .form-control, .form-select {
        border-radius: 8px;
        background-color: #f5f5f5;
        border: 1px solid #ddd;
        padding: 10px;
    }
    .btn-primary {
        background-color: #6f42c1;
        border-color: #6f42c1;
    }
    .btn-secondary {
        background-color: #e0e0e0;
        border-color: #e0e0e0;
    }
    .btn-close {
        background-color: transparent;
        border: none;
    }
</style>
